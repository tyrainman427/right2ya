{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Courier | Right2Ya</title>
  <link rel="shortcut icon" href="{% static 'img/logo.png' %}">
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'img/logo.png' %}">
  <link rel="manifest" href="{% static 'manifest.json' %}">

  {% load bootstrap4 %}
  {% bootstrap_css %}
  {% bootstrap_javascript jquery='full' %}

  {% include 'load_firebase.html' %}

  {% comment %} <script>
    const messaging = firebase.messaging();
    messaging
      .getToken({
        validKey: "BAJ27Hzz47Ijj7xAScGWgTBvsSJC2ZubWTK_ug7rKhwwqXr5LznaCnIgJ07yrsTtVcCFlqoUlamGo0VcqfBgq0g"
      })
      .then((currentToken) => {
        console.log(currentToken);
        if (currentToken) {
          fetch('{% url "fcm_token_update_api" %}?fcm_token=' + currentToken);
        }
      })
      .catch((err) => {
        console.log('An error occured while retrieving token. ', err);
      })
  </script> {% endcomment %}

  <script>
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
  </script>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css">

  <style>
    #content {
      height: calc(var(--vh, 1vh) * 100);
    }
  </style>

  {% block head %}{% endblock %}
</head>

<body>
  <div id="content">
    {% block content %}{% endblock %}
  </div>

  <script src="https://unpkg.com/bootoast@1.0.1/dist/bootoast.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/bootoast@1.0.1/dist/bootoast.min.css">

  Â¸

  <script>
    function toast(message, type) {
      bootoast.toast({
        position: 'centerBottom',
        message,
        type,
      });
    }

  </script>
</body>

</html>

<script>

  $(document).ready(function() {
    var now = new Date();
    setInterval(function() {
      $.ajax({
        url: '/api/jobs/available/',
        method: 'GET',
        success: function(data) {
          console.log(data)
          if (data[0]['status'] == 'ready') {
            setTimeout(function() {
              document.location.reload();
              console.log("Screen should be reloading")
            }, 5000); // Set the duration to 5000 milliseconds (5 seconds)
          }
        }
      });
    }, 10000);
  });
  
</script>