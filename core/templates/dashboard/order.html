{% extends 'dashboard/base.html' %} 

{% block title %} Orders {% endblock %}

{% block body %}

<div class="row">
  <div class="col-md-10 offset-md-1">
    <div class="card shadow text-white mb-3 mt-5">
      <div class="card-header text-center">
        <h5 class="m-0 font-weight-bold text-black">Orders</h5>
      </div>
      <div class="card-body">
        <table class="table table-striped table-hover table-bordered">
          <thead>
            <tr>
              {% comment %} <th scope="col">ID</th> {% endcomment %}
              <th scope="col">Details</th>
              <th scope="col">Customer</th>
              <th scope="col">Driver</th>
              <th scope="col">Total</th>
              <th scope="col">Status</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          {% if orders %}
          <tbody>
            {% for order in orders %}
              <tr class="align-middle">
                {% comment %} <th scope="row">{{ order.id }}</th> {% endcomment %}
                <td>
                  <ul>
                    {% comment %} {% for od in order.order_details.all %} {% endcomment %}
                     <li>{{ order.name }} : ${{ order.delivery_fee|floatformat:2 }} + {{ order.service_fee|floatformat:2 }} = ${{ order.price |floatformat:2 }}</li>
                    {% comment %} {% endfor %} {% endcomment %}
                  </ul>
                </td>
                <td>{{ order.customer}}</td>
                <td>{{ order.courier }}</td>
                <td class="text-right">${{ order.price|floatformat:2}}</td>
                <td>{{ order.get_status_display }}</td>
                <td>
                  {% if order.status == 'processing' %}
                    <form action="" method="post">
                      {% csrf_token %}
                      <input name="id" value="{{ order.id }}" hidden>
                      <button class="btn btn-black btn-sm">Ready</button>
                    </form>
                  {% endif %}
                </td>
              </tr>
            {% endfor %}    
            {% else %}
            <h3 class="text-center">There are no jobs to view.</h3> 
          </tbody>
        {% endif%}
        </table>
        
        
      </div>
    </div>
  </div>
</div>

{% endblock %}
